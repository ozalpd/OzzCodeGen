// ------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version: 14.0.0.0
//  
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
// ------------------------------------------------------------------------------
namespace OzzCodeGen.CodeEngines.AspNetMvc.Templates
{
    using System.Linq;
    using System.Text;
    using System.Collections.Generic;
    using OzzUtils;
    using System;
    
    /// <summary>
    /// Class to produce the template output
    /// </summary>
    
    #line 1 "C:\Users\ozalp\Source\Repos\OzzCodeGen\OzzCodeGen\CodeEngines\AspNetMvc\Templates\MvcJQuerySelectList.tt"
    [global::System.CodeDom.Compiler.GeneratedCodeAttribute("Microsoft.VisualStudio.TextTemplating", "14.0.0.0")]
    public partial class MvcJQuerySelectList : AbstractMvcPartialSelect
    {
#line hidden
        /// <summary>
        /// Create the template output
        /// </summary>
        public override string TransformText()
        {
            
            #line 7 "C:\Users\ozalp\Source\Repos\OzzCodeGen\OzzCodeGen\CodeEngines\AspNetMvc\Templates\MvcJQuerySelectList.tt"
 
var fkeyProperties = Entity.GetInheritedIncludedProperties().Where(e => (e.InCreateView | e.InEditView) & e.IsForeignKey());
var pkeyProperty = Entity.GetPrimaryKey();
string pKey = pkeyProperty == null ? "Id" : pkeyProperty.Name;

WriteUsingNamespaces(); 
            
            #line default
            #line hidden
            this.Write("@model ");
            
            #line 13 "C:\Users\ozalp\Source\Repos\OzzCodeGen\OzzCodeGen\CodeEngines\AspNetMvc\Templates\MvcJQuerySelectList.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(RelatedEntity == null ? "IHas" + Entity.Name + "  @* <= PUT HERE, type or interface for related entities *@" : RelatedEntity.Name));
            
            #line default
            #line hidden
            this.Write("\r\n@{\r\n    Layout = null;\r\n}\r\n\r\n<div class=\"form-group\">\r\n    @Html.Label(EntitySt" +
                    "rings.");
            
            #line 19 "C:\Users\ozalp\Source\Repos\OzzCodeGen\OzzCodeGen\CodeEngines\AspNetMvc\Templates\MvcJQuerySelectList.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Entity.Name));
            
            #line default
            #line hidden
            this.Write(", htmlAttributes: new { @class = \"control-label col-lg-2 col-md-3 col-sm-3 col-xs" +
                    "-12\" })\r\n    <div class=\"col-lg-2 col-md-3 col-sm-3 col-xs-5\">\r\n        @Html.Dr" +
                    "opDownList(\"");
            
            #line 21 "C:\Users\ozalp\Source\Repos\OzzCodeGen\OzzCodeGen\CodeEngines\AspNetMvc\Templates\MvcJQuerySelectList.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(FKeyProperty.Name));
            
            #line default
            #line hidden
            this.Write("\", null, ActionStrings.SelectPlease, htmlAttributes: new { @class = \"form-control" +
                    "\" })\r\n    </div>\r\n    <div class=\"col-lg-3 col-md-3 col-sm-4 col-xs-7\">\r\n       " +
                    " @Html.DropDownListFor(m => m.");
            
            #line 24 "C:\Users\ozalp\Source\Repos\OzzCodeGen\OzzCodeGen\CodeEngines\AspNetMvc\Templates\MvcJQuerySelectList.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(GetRelatedEntityFKeyName()));
            
            #line default
            #line hidden
            this.Write(", null, ActionStrings.SelectPlease, htmlAttributes: new { @class = \"form-control\"" +
                    " })\r\n        @Html.ValidationMessageFor(m => m.");
            
            #line 25 "C:\Users\ozalp\Source\Repos\OzzCodeGen\OzzCodeGen\CodeEngines\AspNetMvc\Templates\MvcJQuerySelectList.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(GetRelatedEntityFKeyName()));
            
            #line default
            #line hidden
            this.Write(", \"\", new { @class = \"text-danger\" })\r\n    </div>\r\n</div>\r\n<script type=\"text/jav" +
                    "ascript\">\r\n    $(\'#");
            
            #line 29 "C:\Users\ozalp\Source\Repos\OzzCodeGen\OzzCodeGen\CodeEngines\AspNetMvc\Templates\MvcJQuerySelectList.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(FKeyProperty.Name));
            
            #line default
            #line hidden
            this.Write("\').change(function () {\r\n        var selectedId = $(this).val();\r\n        if (sel" +
                    "ectedId != null && selectedId != \'\') {\r\n            $.getJSON(\'/");
            
            #line 32 "C:\Users\ozalp\Source\Repos\OzzCodeGen\OzzCodeGen\CodeEngines\AspNetMvc\Templates\MvcJQuerySelectList.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Entity.ControllerName));
            
            #line default
            #line hidden
            this.Write("/Get");
            
            #line 32 "C:\Users\ozalp\Source\Repos\OzzCodeGen\OzzCodeGen\CodeEngines\AspNetMvc\Templates\MvcJQuerySelectList.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Entity.Name));
            
            #line default
            #line hidden
            this.Write("List\', { ");
            
            #line 32 "C:\Users\ozalp\Source\Repos\OzzCodeGen\OzzCodeGen\CodeEngines\AspNetMvc\Templates\MvcJQuerySelectList.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(FKeyProperty.Name.ToCamelCase()));
            
            #line default
            #line hidden
            this.Write(": selectedId, pageSize: 100 }, function (");
            
            #line 32 "C:\Users\ozalp\Source\Repos\OzzCodeGen\OzzCodeGen\CodeEngines\AspNetMvc\Templates\MvcJQuerySelectList.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Entity.Name.Pluralize().ToCamelCase()));
            
            #line default
            #line hidden
            this.Write(") {\r\n                var targetSelect = $(\'#");
            
            #line 33 "C:\Users\ozalp\Source\Repos\OzzCodeGen\OzzCodeGen\CodeEngines\AspNetMvc\Templates\MvcJQuerySelectList.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(GetRelatedEntityFKeyName()));
            
            #line default
            #line hidden
            this.Write("\');\r\n                targetSelect.empty();\r\n                targetSelect.append($" +
                    "(\'<option/>\', {\r\n                    value: \'\',\r\n                    text: \'@Htm" +
                    "l.Raw(ActionStrings.SelectPlease)\'\r\n                }));\r\n                $.each" +
                    "(");
            
            #line 39 "C:\Users\ozalp\Source\Repos\OzzCodeGen\OzzCodeGen\CodeEngines\AspNetMvc\Templates\MvcJQuerySelectList.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Entity.Name.Pluralize().ToCamelCase()));
            
            #line default
            #line hidden
            this.Write(", function (index, ");
            
            #line 39 "C:\Users\ozalp\Source\Repos\OzzCodeGen\OzzCodeGen\CodeEngines\AspNetMvc\Templates\MvcJQuerySelectList.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Entity.Name.ToCamelCase()));
            
            #line default
            #line hidden
            this.Write(") {\r\n                    targetSelect.append($(\'<option/>\', {\r\n                  " +
                    "      value: ");
            
            #line 41 "C:\Users\ozalp\Source\Repos\OzzCodeGen\OzzCodeGen\CodeEngines\AspNetMvc\Templates\MvcJQuerySelectList.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Entity.Name.ToCamelCase()));
            
            #line default
            #line hidden
            this.Write(".");
            
            #line 41 "C:\Users\ozalp\Source\Repos\OzzCodeGen\OzzCodeGen\CodeEngines\AspNetMvc\Templates\MvcJQuerySelectList.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pKey));
            
            #line default
            #line hidden
            this.Write(",\r\n                        text: ");
            
            #line 42 "C:\Users\ozalp\Source\Repos\OzzCodeGen\OzzCodeGen\CodeEngines\AspNetMvc\Templates\MvcJQuerySelectList.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Entity.Name.ToCamelCase()));
            
            #line default
            #line hidden
            this.Write(".");
            
            #line 42 "C:\Users\ozalp\Source\Repos\OzzCodeGen\OzzCodeGen\CodeEngines\AspNetMvc\Templates\MvcJQuerySelectList.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(DisplayMember));
            
            #line default
            #line hidden
            this.Write("\r\n                    }));\r\n                });\r\n            });\r\n        }\r\n    " +
                    "});\r\n</script>");
            return this.GenerationEnvironment.ToString();
        }
    }
    
    #line default
    #line hidden
}
