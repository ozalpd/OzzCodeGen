// ------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version: 16.0.0.0
//  
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
// ------------------------------------------------------------------------------
namespace OzzCodeGen.CodeEngines.AspNetMvc.Templates
{
    using System.Linq;
    using System.Text;
    using System.Collections.Generic;
    using OzzUtils;
    using System;
    
    /// <summary>
    /// Class to produce the template output
    /// </summary>
    
    #line 1 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\AspNetMvc\Templates\MvcJQueryAutoComplete.tt"
    [global::System.CodeDom.Compiler.GeneratedCodeAttribute("Microsoft.VisualStudio.TextTemplating", "16.0.0.0")]
    public partial class MvcJQueryAutoComplete : AbstractMvcPartialSelect
    {
#line hidden
        /// <summary>
        /// Create the template output
        /// </summary>
        public override string TransformText()
        {
            
            #line 7 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\AspNetMvc\Templates\MvcJQueryAutoComplete.tt"
 
var fkeyProperties = Entity.GetInheritedIncludedProperties().Where(e => (e.InCreateView | e.InEditView) & e.IsForeignKey());
var pkeyProperty = Entity.GetPrimaryKey();
string pKey = pkeyProperty == null ? "Id" : pkeyProperty.Name;

var properties = Entity.GetInheritedSimpleProperties().Where(p => !p.Exclude && p.Name != pKey);

WriteUsingNamespaces(); 
            
            #line default
            #line hidden
            this.Write("@model ");
            
            #line 15 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\AspNetMvc\Templates\MvcJQueryAutoComplete.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(RelatedEntity == null ? "IHas" + Entity.Name + "  @* <= PUT HERE, type or interface for related entities *@" : RelatedEntity.Name + "  @*TODO: <= This should be a ViewModel *@"));
            
            #line default
            #line hidden
            this.Write("\r\n@{\r\n    Layout = null;\r\n}\r\n\r\n@Html.HiddenFor(m => m.");
            
            #line 20 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\AspNetMvc\Templates\MvcJQueryAutoComplete.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(FKeyProperty));
            
            #line default
            #line hidden
            this.Write(")\r\n<div class=\"form-group\">\r\n    @Html.Label(EntityStrings.");
            
            #line 22 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\AspNetMvc\Templates\MvcJQueryAutoComplete.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Entity.EntityDefinition.DisplayMember));
            
            #line default
            #line hidden
            this.Write(", htmlAttributes: new { @class = \"control-label col-lg-2 col-md-3 col-sm-3\" })\r\n@" +
                    "*    @Html.LabelFor(m => m.");
            
            #line 23 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\AspNetMvc\Templates\MvcJQueryAutoComplete.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Entity.EntityDefinition.DisplayMember));
            
            #line default
            #line hidden
            this.Write(", htmlAttributes: new { @class = \"control-label col-lg-2 col-md-3 col-sm-3\" }) *@" +
                    "\r\n    <div class=\"col-lg-5 col-md-6 col-sm-7\">\r\n        @Html.EditorFor(m => m.");
            
            #line 25 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\AspNetMvc\Templates\MvcJQueryAutoComplete.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Entity.EntityDefinition.DisplayMember));
            
            #line default
            #line hidden
            this.Write(", new\r\n    {\r\n        htmlAttributes = new\r\n        {\r\n            @class = \"form" +
                    "-control ui-autocomplete-input\",\r\n            autocomplete = \"off\",\r\n           " +
                    " data_url = Url.Action(\"Get");
            
            #line 31 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\AspNetMvc\Templates\MvcJQueryAutoComplete.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Entity.Name.Pluralize()));
            
            #line default
            #line hidden
            this.Write("ForAutoComplete\", \"");
            
            #line 31 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\AspNetMvc\Templates\MvcJQueryAutoComplete.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Entity.ControllerName));
            
            #line default
            #line hidden
            this.Write("\")\r\n        }\r\n    })\r\n        @Html.ValidationMessageFor(m => m.");
            
            #line 34 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\AspNetMvc\Templates\MvcJQueryAutoComplete.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Entity.EntityDefinition.DisplayMember));
            
            #line default
            #line hidden
            this.Write(", \"\", new { @class = \"text-danger\" })\r\n        @Html.ValidationMessageFor(m => m." +
                    "");
            
            #line 35 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\AspNetMvc\Templates\MvcJQueryAutoComplete.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(FKeyProperty));
            
            #line default
            #line hidden
            this.Write(", \"\", new { @class = \"text-danger\" })\r\n    </div>\r\n</div>\r\n<script type=\"text/jav" +
                    "ascript\">\r\n    $(\'#");
            
            #line 39 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\AspNetMvc\Templates\MvcJQueryAutoComplete.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Entity.EntityDefinition.DisplayMember));
            
            #line default
            #line hidden
            this.Write(@"').autocomplete({
        minLenght: 1,
        delay: 500,
        source: function (request, response) {
            var url = $(this.element).data('url');
            $.getJSON(url, { searchString: request.term, pageSize: 25 }, function (data) {
                response(data);
            });
        },
        select: function (event, ui) {
            var itemId = ui.item.id;
            $('#");
            
            #line 50 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\AspNetMvc\Templates\MvcJQueryAutoComplete.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(FKeyProperty.Name));
            
            #line default
            #line hidden
            this.Write("\').val(itemId);\r\n");
            
            #line 51 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\AspNetMvc\Templates\MvcJQueryAutoComplete.tt"
 foreach (var property in properties) { 
            
            #line default
            #line hidden
            
            #line 52 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\AspNetMvc\Templates\MvcJQueryAutoComplete.tt"
 if (property.PropertyDefinition.TypeName=="decimal") { 
            
            #line default
            #line hidden
            this.Write("            //$(\'#");
            
            #line 53 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\AspNetMvc\Templates\MvcJQueryAutoComplete.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(property.Name));
            
            #line default
            #line hidden
            this.Write("\').val(fixDecimalVal(ui.item.");
            
            #line 53 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\AspNetMvc\Templates\MvcJQueryAutoComplete.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(property.Name));
            
            #line default
            #line hidden
            this.Write("));\r\n");
            
            #line 54 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\AspNetMvc\Templates\MvcJQueryAutoComplete.tt"
 } else if (property.IsForeignKey()) { 
            
            #line default
            #line hidden
            this.Write("            //setSelectListID(\'#");
            
            #line 55 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\AspNetMvc\Templates\MvcJQueryAutoComplete.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(property.Name));
            
            #line default
            #line hidden
            this.Write(" > option\', ui.item.");
            
            #line 55 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\AspNetMvc\Templates\MvcJQueryAutoComplete.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(property.Name));
            
            #line default
            #line hidden
            this.Write(");\r\n");
            
            #line 56 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\AspNetMvc\Templates\MvcJQueryAutoComplete.tt"
 } else { 
            
            #line default
            #line hidden
            this.Write("            //$(\'#");
            
            #line 57 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\AspNetMvc\Templates\MvcJQueryAutoComplete.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(property.Name));
            
            #line default
            #line hidden
            this.Write("\').val(ui.item.");
            
            #line 57 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\AspNetMvc\Templates\MvcJQueryAutoComplete.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(property.Name));
            
            #line default
            #line hidden
            this.Write(");\r\n");
            
            #line 58 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\AspNetMvc\Templates\MvcJQueryAutoComplete.tt"
	} 
            
            #line default
            #line hidden
            
            #line 59 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\AspNetMvc\Templates\MvcJQueryAutoComplete.tt"
	} 
            
            #line default
            #line hidden
            this.Write("        },\r\n        change: function (event, ui) {\r\n            if (ui.item == nu" +
                    "ll) {\r\n                $(event.target).val(\'\');\r\n                $(\'#");
            
            #line 64 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\AspNetMvc\Templates\MvcJQueryAutoComplete.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(FKeyProperty.Name));
            
            #line default
            #line hidden
            this.Write("\').val(\'\');\r\n            }\r\n        },\r\n        open: function (event, ui) {\r\n   " +
                    "         var boxWidth = $(\'#");
            
            #line 68 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\AspNetMvc\Templates\MvcJQueryAutoComplete.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Entity.EntityDefinition.DisplayMember));
            
            #line default
            #line hidden
            this.Write("\').outerWidth();\r\n            var minWidth = 300;\r\n            $(this).autocomple" +
                    "te(\"widget\")\r\n                .css({ \"width\": (boxWidth > minWidth ? boxWidth : " +
                    "minWidth) })\r\n                .addClass(\'fontSize80pc\');\r\n        }\r\n    });\r\n</" +
                    "script>");
            return this.GenerationEnvironment.ToString();
        }
    }
    
    #line default
    #line hidden
}
