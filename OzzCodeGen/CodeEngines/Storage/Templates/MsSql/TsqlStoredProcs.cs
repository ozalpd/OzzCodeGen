// ------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version: 17.0.0.0
//  
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
// ------------------------------------------------------------------------------
namespace OzzCodeGen.CodeEngines.Storage.Templates.MsSql
{
    using System.Linq;
    using System.Text;
    using System.Collections.Generic;
    using System;
    
    /// <summary>
    /// Class to produce the template output
    /// </summary>
    
    #line 1 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
    [global::System.CodeDom.Compiler.GeneratedCodeAttribute("Microsoft.VisualStudio.TextTemplating", "17.0.0.0")]
    public partial class TsqlStoredProcs : AbstractStorageTemplate
    {
#line hidden
        /// <summary>
        /// Create the template output
        /// </summary>
        public override string TransformText()
        {
            this.Write("SET ANSI_NULLS ON\r\nGo\r\nSET QUOTED_IDENTIFIER ON\r\nGo\r\n\r\n");
            
            #line 12 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  var firstBase = TableDefinition.GetFirstBase();
    var pKey = firstBase.PrimaryKeyColumn;
    bool insPKey = !(pKey.PropertyDefinition.IsStoreGenerated && pKey.PropertyDefinition.IsTypeNumeric() && !TableDefinition.UseInheritance);
    string keyVarName = "@" + pKey.Name;
    var deleteMarkColumn = firstBase.GetDeleteMarkColumn();
    int colNr = 0;
    var colDeclaresUpd = TableDefinition.GetColumnList().Where(c => c.PrimaryKey == false && c.Exclude == false && !c.DataType.StartsWith("as ", StringComparison.InvariantCultureIgnoreCase) & string.IsNullOrEmpty(c.UpdateDefault));
    var sprocGeneration = TableDefinition.StoredProcGeneration;
    bool createInsertOrUpdate = sprocGeneration > StoredProcGeneration.CUD;
    string logInsSP = string.Concat("[", CodeEngine.LogSchemaName, "].[", TableDefinition.LogTableName, "_Insert]");

            
            #line default
            #line hidden
            
            #line 23 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  if(TableDefinition.HasLogTable) { 
            
            #line default
            #line hidden
            this.Write("-- --------------------------------------------------------------------\r\n-- Store" +
                    "d Procedure: ");
            
            #line 25 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(logInsSP));
            
            #line default
            #line hidden
            this.Write("\r\n-- --------------------------------------------------------------------\r\nIF  EX" +
                    "ISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N\'");
            
            #line 27 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(logInsSP));
            
            #line default
            #line hidden
            this.Write("\') AND type in (N\'P\', N\'PC\'))\r\nDROP PROCEDURE ");
            
            #line 28 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(logInsSP));
            
            #line default
            #line hidden
            this.Write("\r\nGo\r\nCREATE PROCEDURE ");
            
            #line 30 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(logInsSP));
            
            #line default
            #line hidden
            this.Write("\r\n    @");
            
            #line 31 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.Name));
            
            #line default
            #line hidden
            this.Write("Id ");
            
            #line 31 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(GetColumnType(TableDefinition.PrimaryKeyColumn)));
            
            #line default
            #line hidden
            this.Write(",\r\n    @LogStatus [int],\r\n    @LogStatusDescription [nVarChar](100)\r\nAs\r\nBegin\r\n " +
                    "   Insert Into [");
            
            #line 36 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(CodeEngine.LogSchemaName));
            
            #line default
            #line hidden
            this.Write("].[");
            
            #line 36 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.LogTableName));
            
            #line default
            #line hidden
            this.Write("](\r\n            [");
            
            #line 37 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.Name));
            
            #line default
            #line hidden
            this.Write("Id],\r\n");
            
            #line 38 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  var columns = TableDefinition.GetColumnList().Where(c => c.PrimaryKey == false & c.DoNotLog == false & c.Exclude == false);
    foreach (var column in columns)
    {
            
            #line default
            #line hidden
            this.Write("            [");
            
            #line 41 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(column.Name));
            
            #line default
            #line hidden
            this.Write("],\r\n");
            
            #line 42 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  } 
            
            #line default
            #line hidden
            this.Write("            [LogStatus], \r\n            [LogStatusDescription])\r\n    Select  [");
            
            #line 45 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.PrimaryKeyColumn.Name));
            
            #line default
            #line hidden
            this.Write("],\r\n");
            
            #line 46 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  foreach (var column in columns)
    {
            
            #line default
            #line hidden
            this.Write("            ");
            
            #line 48 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(column.GetLogParam()));
            
            #line default
            #line hidden
            this.Write(",\r\n");
            
            #line 49 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  } 
            
            #line default
            #line hidden
            this.Write("            @LogStatus,\r\n            @LogStatusDescription\r\n    From  ");
            
            #line 52 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.ConcatTableNameAndSchema()));
            
            #line default
            #line hidden
            this.Write("\r\n    Where ");
            
            #line 53 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.ConcatTableNameAndSchema()));
            
            #line default
            #line hidden
            this.Write(".[");
            
            #line 53 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.PrimaryKeyColumn.Name));
            
            #line default
            #line hidden
            this.Write("] = @");
            
            #line 53 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.Name));
            
            #line default
            #line hidden
            this.Write("Id;\r\nEnd\r\nGo\r\n");
            
            #line 56 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  } 
            
            #line default
            #line hidden
            
            #line 57 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  if(sprocGeneration!=StoredProcGeneration.InsertOrUpdateOnly) { 
            
            #line default
            #line hidden
            this.Write("-- --------------------------------------------------------------------\r\n-- Store" +
                    "d Procedure: [");
            
            #line 59 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.SchemaName));
            
            #line default
            #line hidden
            this.Write("].[");
            
            #line 59 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.TableName));
            
            #line default
            #line hidden
            this.Write("_Delete]\r\n-- --------------------------------------------------------------------" +
                    "\r\nIF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N\'[");
            
            #line 61 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.SchemaName));
            
            #line default
            #line hidden
            this.Write("].[");
            
            #line 61 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.TableName));
            
            #line default
            #line hidden
            this.Write("_Delete]\') AND type in (N\'P\', N\'PC\'))\r\nDROP PROCEDURE [");
            
            #line 62 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.SchemaName));
            
            #line default
            #line hidden
            this.Write("].[");
            
            #line 62 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.TableName));
            
            #line default
            #line hidden
            this.Write("_Delete]\r\nGo\r\nCREATE PROCEDURE [");
            
            #line 64 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.SchemaName));
            
            #line default
            #line hidden
            this.Write("].[");
            
            #line 64 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.TableName));
            
            #line default
            #line hidden
            this.Write("_Delete]\r\n    ");
            
            #line 65 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(keyVarName));
            
            #line default
            #line hidden
            this.Write(" ");
            
            #line 65 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(GetColumnType(pKey)));
            
            #line default
            #line hidden
            this.Write("\r\nAs\r\nBegin\r\n");
            
            #line 68 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  if(TableDefinition.HasLogTable) { 
            
            #line default
            #line hidden
            this.Write("    /* Silinmeden önceki son hali loglanıyor... */\r\n    Exec ");
            
            #line 70 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(logInsSP));
            
            #line default
            #line hidden
            this.Write("\r\n        @");
            
            #line 71 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.Name));
            
            #line default
            #line hidden
            this.Write("Id = ");
            
            #line 71 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(keyVarName));
            
            #line default
            #line hidden
            this.Write(",\r\n        @LogStatus = 4010,\r\n        @LogStatusDescription = N\'Siliniyor...\';\r\n" +
                    "\r\n");
            
            #line 75 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  } 
            
            #line default
            #line hidden
            
            #line 76 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"

if(deleteMarkColumn != null)
{
 
            
            #line default
            #line hidden
            this.Write("    Declare @");
            
            #line 80 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(deleteMarkColumn.Name));
            
            #line default
            #line hidden
            this.Write(" bit;\r\n\r\n    Select @");
            
            #line 82 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(deleteMarkColumn.Name));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 82 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(deleteMarkColumn.Name));
            
            #line default
            #line hidden
            this.Write("\r\n        From [");
            
            #line 83 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.SchemaName));
            
            #line default
            #line hidden
            this.Write("].[");
            
            #line 83 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(firstBase.TableName));
            
            #line default
            #line hidden
            this.Write("]\r\n        Where ");
            
            #line 84 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pKey));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 84 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(keyVarName));
            
            #line default
            #line hidden
            this.Write("\r\n\r\n    If @");
            
            #line 86 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(deleteMarkColumn.Name));
            
            #line default
            #line hidden
            this.Write(" = 1\r\n    Begin\r\n        /* TODO: Check cascaded data from other tables */\r\n");
            
            #line 89 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  PushIndent("    ");
    WriteDeleteStatement(TableDefinition, firstBase, keyVarName);
    PopIndent(); 
            
            #line default
            #line hidden
            this.Write("        \r\n    End\r\n    Else\r\n    Begin\r\n        Update [");
            
            #line 96 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.SchemaName));
            
            #line default
            #line hidden
            this.Write("].[");
            
            #line 96 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(firstBase.TableName));
            
            #line default
            #line hidden
            this.Write("]\r\n            Set ");
            
            #line 97 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(deleteMarkColumn.Name));
            
            #line default
            #line hidden
            this.Write(" = 1\r\n            Where [");
            
            #line 98 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pKey));
            
            #line default
            #line hidden
            this.Write("] = ");
            
            #line 98 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(keyVarName));
            
            #line default
            #line hidden
            this.Write("\r\n    End\r\n");
            
            #line 100 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
    } else { 
            
            #line default
            #line hidden
            this.Write("    /* TODO: Check cascaded data from other tables */\r\n");
            
            #line 102 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 WriteDeleteStatement(TableDefinition, firstBase, keyVarName); 
            
            #line default
            #line hidden
            
            #line 103 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"

} 
            
            #line default
            #line hidden
            this.Write("End\r\nGo\r\n-- --------------------------------------------------------------------\r" +
                    "\n-- Stored Procedure: [");
            
            #line 108 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.SchemaName));
            
            #line default
            #line hidden
            this.Write("].[");
            
            #line 108 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.TableName));
            
            #line default
            #line hidden
            this.Write("_Insert]\r\n-- --------------------------------------------------------------------" +
                    "\r\nIF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N\'[");
            
            #line 110 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.SchemaName));
            
            #line default
            #line hidden
            this.Write("].[");
            
            #line 110 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.TableName));
            
            #line default
            #line hidden
            this.Write("_Insert]\') AND type in (N\'P\', N\'PC\'))\r\nDROP PROCEDURE [");
            
            #line 111 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.SchemaName));
            
            #line default
            #line hidden
            this.Write("].[");
            
            #line 111 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.TableName));
            
            #line default
            #line hidden
            this.Write("_Insert]\r\nGo\r\nCREATE PROCEDURE [");
            
            #line 113 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.SchemaName));
            
            #line default
            #line hidden
            this.Write("].[");
            
            #line 113 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.TableName));
            
            #line default
            #line hidden
            this.Write("_Insert]\r\n");
            
            #line 114 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
        
    var colDeclaresIns = TableDefinition.GetColumnList().Where(c => c.PrimaryKey == false && !c.DataType.StartsWith("as ", StringComparison.InvariantCultureIgnoreCase) && c.Exclude == false & string.IsNullOrEmpty(c.InsertDefault));
    string keyVal = insPKey ? keyVarName : "@newKey";
    if(insPKey){ 
            
            #line default
            #line hidden
            this.Write("    ");
            
            #line 118 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(keyVarName));
            
            #line default
            #line hidden
            this.Write(" ");
            
            #line 118 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(GetColumnType(pKey)));
            
            #line default
            #line hidden
            this.Write(",\r\n");
            
            #line 119 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
    }
    foreach (var column in colDeclaresIns)
    { 
            colNr++;
            
            #line default
            #line hidden
            this.Write("    @");
            
            #line 123 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(column.Name));
            
            #line default
            #line hidden
            this.Write(" ");
            
            #line 123 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(GetColumnType(column)));
            
            #line default
            #line hidden
            
            #line 123 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 if(colNr < colDeclaresIns.Count()) {
            
            #line default
            #line hidden
            this.Write(",");
            
            #line 123 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  } 
            
            #line default
            #line hidden
            this.Write(" \r\n");
            
            #line 124 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
    } 
            
            #line default
            #line hidden
            this.Write("As\r\nBegin\r\n");
            
            #line 127 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  if(!insPKey) { 
            
            #line default
            #line hidden
            this.Write("    Declare ");
            
            #line 128 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(keyVal));
            
            #line default
            #line hidden
            this.Write("        ");
            
            #line 128 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.PrimaryKeyColumn.DataType));
            
            #line default
            #line hidden
            this.Write("\r\n\r\n");
            
            #line 130 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  } 
            
            #line default
            #line hidden
            
            #line 131 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  if(insPKey) {
        WriteInsertStatement(firstBase, keyVarName);
    } else {
        WriteInsertStatement(firstBase, string.Empty); 
            
            #line default
            #line hidden
            this.Write("\r\n    Set ");
            
            #line 136 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(keyVal));
            
            #line default
            #line hidden
            this.Write(" = SCOPE_IDENTITY();\r\n");
            
            #line 137 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  } 
            
            #line default
            #line hidden
            
            #line 138 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  if(TableDefinition.HasLogTable) { 
            
            #line default
            #line hidden
            this.Write("    Exec ");
            
            #line 139 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(logInsSP));
            
            #line default
            #line hidden
            this.Write("\r\n        @");
            
            #line 140 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.Name));
            
            #line default
            #line hidden
            this.Write("Id = ");
            
            #line 140 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(keyVal));
            
            #line default
            #line hidden
            this.Write(",\r\n        @LogStatus = 1010,\r\n        @LogStatusDescription = N\'Yeni Kayıt\';\r\n");
            
            #line 143 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  } 
            
            #line default
            #line hidden
            
            #line 144 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  if(TableDefinition.UseInheritance)
    { 
            
            #line default
            #line hidden
            this.Write("\r\n");
            
            #line 147 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 WriteInsertStatement(TableDefinition, keyVal); 
            
            #line default
            #line hidden
            
            #line 148 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
    } 
            
            #line default
            #line hidden
            this.Write("\r\n");
            
            #line 150 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 WriteSelectStatement(keyVal); 
            
            #line default
            #line hidden
            this.Write("End\r\nGo\r\n-- --------------------------------------------------------------------\r" +
                    "\n-- Stored Procedure: [");
            
            #line 154 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.SchemaName));
            
            #line default
            #line hidden
            this.Write("].[");
            
            #line 154 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.TableName));
            
            #line default
            #line hidden
            this.Write("_Update]\r\n-- --------------------------------------------------------------------" +
                    "\r\nIF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N\'[");
            
            #line 156 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.SchemaName));
            
            #line default
            #line hidden
            this.Write("].[");
            
            #line 156 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.TableName));
            
            #line default
            #line hidden
            this.Write("_Update]\') AND type in (N\'P\', N\'PC\'))\r\nDROP PROCEDURE [");
            
            #line 157 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.SchemaName));
            
            #line default
            #line hidden
            this.Write("].[");
            
            #line 157 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.TableName));
            
            #line default
            #line hidden
            this.Write("_Update]\r\nGo\r\nCREATE PROCEDURE [");
            
            #line 159 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.SchemaName));
            
            #line default
            #line hidden
            this.Write("].[");
            
            #line 159 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.TableName));
            
            #line default
            #line hidden
            this.Write("_Update]\r\n    ");
            
            #line 160 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(keyVarName));
            
            #line default
            #line hidden
            this.Write(" ");
            
            #line 160 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(GetColumnType(pKey)));
            
            #line default
            #line hidden
            
            #line 160 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 if(colDeclaresUpd.Any()){ 
            
            #line default
            #line hidden
            this.Write(",");
            
            #line 160 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 } 
            
            #line default
            #line hidden
            this.Write(" \r\n");
            
            #line 161 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
        
    colNr = 0;
    foreach (var column in colDeclaresUpd)
    { 
            colNr++;
            
            #line default
            #line hidden
            this.Write("    @");
            
            #line 166 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(column.Name));
            
            #line default
            #line hidden
            this.Write(" ");
            
            #line 166 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(GetColumnType(column)));
            
            #line default
            #line hidden
            
            #line 166 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 if(colNr < colDeclaresUpd.Count()) {
            
            #line default
            #line hidden
            this.Write(",");
            
            #line 166 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  } 
            
            #line default
            #line hidden
            this.Write(" \r\n");
            
            #line 167 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
    } 
            
            #line default
            #line hidden
            this.Write("As\r\nBegin\r\n");
            
            #line 170 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 WriteUpdateStatement(TableDefinition, keyVarName); 
            
            #line default
            #line hidden
            
            #line 171 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  if(TableDefinition.UseInheritance)
    { 
            
            #line default
            #line hidden
            this.Write("\r\n");
            
            #line 174 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 WriteUpdateStatement(firstBase, keyVarName); 
            
            #line default
            #line hidden
            
            #line 175 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
    } 
            
            #line default
            #line hidden
            this.Write("\r\n");
            
            #line 177 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  if(TableDefinition.HasLogTable) { 
            
            #line default
            #line hidden
            
            #line 178 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  if(colDeclaresUpd.Any(c=>c.CheckIfAltered)) { 
            
            #line default
            #line hidden
            this.Write("    If @@ROWCOUNT > 0\r\n");
            
            #line 180 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  } 
            
            #line default
            #line hidden
            this.Write("    Exec ");
            
            #line 181 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(logInsSP));
            
            #line default
            #line hidden
            this.Write("\r\n        @");
            
            #line 182 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.Name));
            
            #line default
            #line hidden
            this.Write("Id = ");
            
            #line 182 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(keyVarName));
            
            #line default
            #line hidden
            this.Write(",\r\n        @LogStatus = 1020,\r\n        @LogStatusDescription = N\'Genel Güncelleme" +
                    "\';\r\n\r\n");
            
            #line 186 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  } 
            
            #line default
            #line hidden
            
            #line 187 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 WriteSelectStatement(keyVarName); 
            
            #line default
            #line hidden
            this.Write("End\r\nGo\r\n");
            
            #line 190 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  } 
            
            #line default
            #line hidden
            
            #line 191 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 if(createInsertOrUpdate){ 
            
            #line default
            #line hidden
            this.Write("\r\n-- --------------------------------------------------------------------\r\n-- Sto" +
                    "red Procedure: [");
            
            #line 194 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.SchemaName));
            
            #line default
            #line hidden
            this.Write("].[");
            
            #line 194 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.TableName));
            
            #line default
            #line hidden
            this.Write("_InsertOrUpdate]\r\n-- ------------------------------------------------------------" +
                    "--------\r\nIF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N\'[");
            
            #line 196 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.SchemaName));
            
            #line default
            #line hidden
            this.Write("].[");
            
            #line 196 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.TableName));
            
            #line default
            #line hidden
            this.Write("_InsertOrUpdate]\') AND type in (N\'P\', N\'PC\'))\r\nDROP PROCEDURE [");
            
            #line 197 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.SchemaName));
            
            #line default
            #line hidden
            this.Write("].[");
            
            #line 197 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.TableName));
            
            #line default
            #line hidden
            this.Write("_InsertOrUpdate]\r\nGo\r\nCREATE PROCEDURE [");
            
            #line 199 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.SchemaName));
            
            #line default
            #line hidden
            this.Write("].[");
            
            #line 199 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.TableName));
            
            #line default
            #line hidden
            this.Write("_InsertOrUpdate]\r\n");
            
            #line 200 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  if(insPKey) { 
            
            #line default
            #line hidden
            this.Write("    ");
            
            #line 201 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(keyVarName));
            
            #line default
            #line hidden
            this.Write(" ");
            
            #line 201 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(GetColumnType(pKey)));
            
            #line default
            #line hidden
            this.Write("\r\n");
            
            #line 202 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  }
    var colsInsOrUpd = TableDefinition.GetColumnList().Where(c => c.PrimaryKey == false && c.Exclude == false && !c.DataType.StartsWith("as ", StringComparison.InvariantCultureIgnoreCase) && (string.IsNullOrEmpty(c.GetInsertDefault(true)) || string.IsNullOrEmpty(c.GetUpdateDefault(true))));
    colNr = 0;
    foreach (var column in colsInsOrUpd)
    {
            colNr++;
            
            #line default
            #line hidden
            this.Write("    @");
            
            #line 208 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(column.Name));
            
            #line default
            #line hidden
            this.Write(" ");
            
            #line 208 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(GetColumnType(column)));
            
            #line default
            #line hidden
            
            #line 208 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 if(colNr < colsInsOrUpd.Count()) {
            
            #line default
            #line hidden
            this.Write(",");
            
            #line 208 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  } 
            
            #line default
            #line hidden
            this.Write(" \r\n");
            
            #line 209 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 } 
            
            #line default
            #line hidden
            this.Write("As\r\nBegin\r\n");
            
            #line 212 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  if(insPKey==false) {
        var uniqueCols = TableDefinition.GetColumnList().Where(c => c.PrimaryKey == false && c.Exclude == false && !c.DataType.StartsWith("as ", StringComparison.InvariantCultureIgnoreCase) & c.Unique);
  
            
            #line default
            #line hidden
            this.Write("    Declare ");
            
            #line 215 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(keyVarName));
            
            #line default
            #line hidden
            this.Write(" ");
            
            #line 215 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(GetColumnType(pKey)));
            
            #line default
            #line hidden
            this.Write(";\r\n");
            
            #line 216 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  if (createInsertOrUpdate){
            
            #line default
            #line hidden
            this.Write("    Declare @Result int;\r\n");
            
            #line 218 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
    } 
            
            #line default
            #line hidden
            this.Write("\r\n    Select ");
            
            #line 220 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(keyVarName));
            
            #line default
            #line hidden
            this.Write(" = [");
            
            #line 220 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pKey.Name));
            
            #line default
            #line hidden
            this.Write("]\r\n    From  ");
            
            #line 221 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.ConcatTableNameAndSchema()));
            
            #line default
            #line hidden
            this.Write(" (nolock)\r\n");
            
            #line 222 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
      if(uniqueCols.Any()) {
            var firstUnique = uniqueCols.First(); 
            
            #line default
            #line hidden
            this.Write("    Where [");
            
            #line 224 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(firstUnique.Name));
            
            #line default
            #line hidden
            this.Write("] = @");
            
            #line 224 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(firstUnique.Name));
            
            #line default
            #line hidden
            this.Write("\r\n");
            
            #line 225 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
          foreach (var col in uniqueCols.Where(c => c != firstUnique))
            { 
            
            #line default
            #line hidden
            this.Write("      And [");
            
            #line 227 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(col.Name));
            
            #line default
            #line hidden
            this.Write("] = @");
            
            #line 227 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(col.Name));
            
            #line default
            #line hidden
            this.Write("\r\n");
            
            #line 228 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
          }
        } else { 
            
            #line default
            #line hidden
            this.Write("    Where [");
            
            #line 230 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pKey.Name));
            
            #line default
            #line hidden
            this.Write("] = ");
            
            #line 230 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(keyVarName));
            
            #line default
            #line hidden
            this.Write("\r\n");
            
            #line 231 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
      } 
            
            #line default
            #line hidden
            this.Write(" \r\n");
            
            #line 232 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
    } 
            
            #line default
            #line hidden
            this.Write("    Set @Result = 0;\r\n\r\n");
            
            #line 235 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  if(insPKey) { 
            
            #line default
            #line hidden
            this.Write("    If Exists (Select * From [");
            
            #line 236 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.SchemaName));
            
            #line default
            #line hidden
            this.Write("].[");
            
            #line 236 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.TableName));
            
            #line default
            #line hidden
            this.Write("] Where [");
            
            #line 236 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pKey));
            
            #line default
            #line hidden
            this.Write("] = ");
            
            #line 236 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(keyVarName));
            
            #line default
            #line hidden
            this.Write(")\r\n");
            
            #line 237 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  } else { 
            
            #line default
            #line hidden
            this.Write("    If ");
            
            #line 238 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(keyVarName));
            
            #line default
            #line hidden
            this.Write(" Is Not Null\r\n");
            
            #line 239 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
    } 
            
            #line default
            #line hidden
            this.Write("    Begin\r\n");
            
            #line 241 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  PushIndent("    ");
    WriteUpdateStatement(TableDefinition, keyVarName, forInsOrUpdate: true);
    PopIndent(); 
            
            #line default
            #line hidden
            
            #line 244 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  if(TableDefinition.UseInheritance)
    { 
            
            #line default
            #line hidden
            this.Write("\r\n");
            
            #line 247 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  PushIndent("    ");
    WriteUpdateStatement(firstBase, keyVarName, forInsOrUpdate: true);
    if(TableDefinition.HasLogTable)
    PopIndent(); 
            
            #line default
            #line hidden
            
            #line 251 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
    } 
    if(TableDefinition.HasLogTable) {
        PushIndent("    ");
        WriteLine("");
        if(colDeclaresUpd.Any(c=>c.CheckIfAltered)) {
            PushIndent("    ");
            
            #line default
            #line hidden
            this.Write("If @@ROWCOUNT > 0\r\nBegin\r\n");
            
            #line 259 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
      } 
            
            #line default
            #line hidden
            this.Write("    Exec ");
            
            #line 260 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(logInsSP));
            
            #line default
            #line hidden
            this.Write("\r\n        @");
            
            #line 261 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.Name));
            
            #line default
            #line hidden
            this.Write("Id = ");
            
            #line 261 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(keyVarName));
            
            #line default
            #line hidden
            this.Write(",\r\n        @LogStatus = 1025,\r\n        @LogStatusDescription = N\'Otom. Güncelleme" +
                    "\';\r\n");
            
            #line 264 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  }
    PopIndent(); 
            
            #line default
            #line hidden
            this.Write("        Set @Result = -1;\r\n");
            
            #line 267 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
      if(TableDefinition.HasLogTable && colDeclaresUpd.Any(c=>c.CheckIfAltered)) {
        PopIndent(); 
            
            #line default
            #line hidden
            this.Write("        End\r\n");
            
            #line 270 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
      }
            
            #line default
            #line hidden
            this.Write("    End\r\n    Else\r\n    Begin\r\n");
            
            #line 274 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  PushIndent("    ");
    if(insPKey) {
        WriteInsertStatement(firstBase, keyVarName, forInsOrUpdate: true);
    } else {
        WriteInsertStatement(firstBase, string.Empty, forInsOrUpdate: true);
    } 
            
            #line default
            #line hidden
            
            #line 280 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  if(TableDefinition.HasLogTable) { 
            
            #line default
            #line hidden
            this.Write("\r\n    Set ");
            
            #line 282 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(keyVarName));
            
            #line default
            #line hidden
            this.Write(" = SCOPE_IDENTITY();\r\n    Exec ");
            
            #line 283 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(logInsSP));
            
            #line default
            #line hidden
            this.Write("\r\n        @");
            
            #line 284 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.Name));
            
            #line default
            #line hidden
            this.Write("Id = ");
            
            #line 284 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(keyVarName));
            
            #line default
            #line hidden
            this.Write(",\r\n        @LogStatus = 1015,\r\n        @LogStatusDescription = N\'Otom. Yeni Kayıt" +
                    "\';\r\n");
            
            #line 287 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  }
    PopIndent(); 
            
            #line default
            #line hidden
            this.Write("        Set @Result = 1;\r\n    End\r\n\r\n");
            
            #line 292 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  string resulType = "int";
    switch (sprocGeneration)
    {
        case StoredProcGeneration.InsertOrUpdateAndCUD:
            
            #line default
            #line hidden
            this.Write("    Select @Result\r\n");
            
            #line 297 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
         break;
        case StoredProcGeneration.InsertOrUpdateWithRowResult:
            resulType = TableDefinition.EntityDefinition.Name;
            WriteSelectStatement(keyVarName);
            break;
        default:
            break;
    }
            
            #line default
            #line hidden
            
            #line 305 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  if(sprocGeneration==StoredProcGeneration.InsertOrUpdateOnly || sprocGeneration==StoredProcGeneration.InsertOrUpdateWithComplexResult) {
            resulType = TableDefinition.TableName + "_InsertOrUpdate" + "_Result"; 
            
            #line default
            #line hidden
            this.Write("    Select  [");
            
            #line 307 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(firstBase.TableName));
            
            #line default
            #line hidden
            this.Write("].[");
            
            #line 307 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(firstBase.PrimaryKeyColumn.Name));
            
            #line default
            #line hidden
            this.Write("],\r\n");
            
            #line 308 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
          WriteSelectColumns(firstBase, true); 
            
            #line default
            #line hidden
            this.Write("            @Result As Result\r\n    From  ");
            
            #line 310 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.ConcatTableNameAndSchema()));
            
            #line default
            #line hidden
            this.Write("\r\n    Where [");
            
            #line 311 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(firstBase.SchemaName));
            
            #line default
            #line hidden
            this.Write("].[");
            
            #line 311 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(firstBase.TableName));
            
            #line default
            #line hidden
            this.Write("].[");
            
            #line 311 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(firstBase.PrimaryKeyColumn.Name));
            
            #line default
            #line hidden
            this.Write("] = ");
            
            #line 311 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(keyVarName));
            
            #line default
            #line hidden
            this.Write("\r\n");
            
            #line 312 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  }
            
            #line default
            #line hidden
            this.Write("End\r\nGo\r\n/* To map in EF\r\n        public ");
            
            #line 316 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(resulType));
            
            #line default
            #line hidden
            this.Write(" InsertOrUpdate(");
            
            #line 316 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.EntityDefinition.Name));
            
            #line default
            #line hidden
            this.Write(" entity)\r\n        {\r\n            var result = ");
            
            #line 318 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.TableName));
            
            #line default
            #line hidden
            this.Write("_InsertOrUpdate(\r\n                //entity.");
            
            #line 319 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pKey));
            
            #line default
            #line hidden
            this.Write(",\r\n");
            
            #line 320 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
        
    colNr = 0;
    foreach (var column in colsInsOrUpd)
    { 
            colNr++;
            
            #line default
            #line hidden
            this.Write("                entity.");
            
            #line 325 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(column.Name));
            
            #line default
            #line hidden
            
            #line 325 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 if(colNr < colsInsOrUpd.Count() || sprocGeneration==StoredProcGeneration.InsertOrUpdateAndCUD) {
            
            #line default
            #line hidden
            this.Write(",");
            
            #line 325 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  } 
            
            #line default
            #line hidden
            this.Write(" \r\n");
            
            #line 326 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
    }
    if(sprocGeneration==StoredProcGeneration.InsertOrUpdateAndCUD){
            
            #line default
            #line hidden
            this.Write("                new ObjectParameter(\"Result\", typeof(int)));\r\n\r\n            retur" +
                    "n result.FirstOrDefault() ?? 0;\r\n");
            
            #line 331 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
    } else {
            
            #line default
            #line hidden
            this.Write("                );\r\n\r\n            return result.FirstOrDefault();\r\n");
            
            #line 335 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
    } 
            
            #line default
            #line hidden
            this.Write("        }\r\n\r\n*/\r\n");
            
            #line 339 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
    } 
            
            #line default
            #line hidden
            return this.GenerationEnvironment.ToString();
        }
        
        #line 340 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 
protected void WriteDeleteStatement(StorageEntitySetting table, StorageEntitySetting baseTable,string pkeyValue)
{ 
        
        #line default
        #line hidden
        
        #line 342 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("    Delete From [");

        
        #line default
        #line hidden
        
        #line 343 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(table.SchemaName));

        
        #line default
        #line hidden
        
        #line 343 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("].[");

        
        #line default
        #line hidden
        
        #line 343 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(table.TableName));

        
        #line default
        #line hidden
        
        #line 343 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("]\r\n        Where [");

        
        #line default
        #line hidden
        
        #line 344 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(table.SchemaName));

        
        #line default
        #line hidden
        
        #line 344 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("].[");

        
        #line default
        #line hidden
        
        #line 344 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(table.TableName));

        
        #line default
        #line hidden
        
        #line 344 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("].[");

        
        #line default
        #line hidden
        
        #line 344 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(table.PrimaryKeyColumn.Name));

        
        #line default
        #line hidden
        
        #line 344 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("] = ");

        
        #line default
        #line hidden
        
        #line 344 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(pkeyValue));

        
        #line default
        #line hidden
        
        #line 344 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("\r\n");

        
        #line default
        #line hidden
        
        #line 345 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 if(TableDefinition.UseInheritance)
    { 
        
        #line default
        #line hidden
        
        #line 346 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("\r\n    Delete From [");

        
        #line default
        #line hidden
        
        #line 348 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(baseTable.SchemaName));

        
        #line default
        #line hidden
        
        #line 348 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("].[");

        
        #line default
        #line hidden
        
        #line 348 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(baseTable.TableName));

        
        #line default
        #line hidden
        
        #line 348 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("]\r\n        Where [");

        
        #line default
        #line hidden
        
        #line 349 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(baseTable.SchemaName));

        
        #line default
        #line hidden
        
        #line 349 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("].[");

        
        #line default
        #line hidden
        
        #line 349 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(baseTable.TableName));

        
        #line default
        #line hidden
        
        #line 349 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("].[");

        
        #line default
        #line hidden
        
        #line 349 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(baseTable.PrimaryKeyColumn.Name));

        
        #line default
        #line hidden
        
        #line 349 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("] = ");

        
        #line default
        #line hidden
        
        #line 349 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(pkeyValue));

        
        #line default
        #line hidden
        
        #line 349 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("\r\n");

        
        #line default
        #line hidden
        
        #line 350 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
    } 
        
        #line default
        #line hidden
        
        #line 351 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 
} 
        
        #line default
        #line hidden
        
        #line 353 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 
protected void WriteUpdateStatement(StorageEntitySetting table, string pkeyValue, bool forInsOrUpdate = false, int maxLineLen = 48)
{
    var columns = table.UseInheritance
                ? table.Properties.Where(c => c.PrimaryKey == false & c.Exclude == false & c.GetUpdateDefault(forInsOrUpdate) != "NeverUpdate")
                : table.GetColumnList().Where(c => c.PrimaryKey == false & c.Exclude == false & c.GetUpdateDefault(forInsOrUpdate) != "NeverUpdate");
    var colsToCheck = columns.Where(c => c.CheckIfAltered && string.IsNullOrEmpty(c.UpdateDefault));
    if(columns.Any())
    {
 
        
        #line default
        #line hidden
        
        #line 362 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("    Update [");

        
        #line default
        #line hidden
        
        #line 363 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(table.SchemaName));

        
        #line default
        #line hidden
        
        #line 363 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("].[");

        
        #line default
        #line hidden
        
        #line 363 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(table.TableName));

        
        #line default
        #line hidden
        
        #line 363 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("]\r\n       Set ");

        
        #line default
        #line hidden
        
        #line 364 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
    
    int colNr = 0, colLen, lineLen = 0;
    PushIndent("           ");
    foreach (var column in columns)
    { 
        string colValue = string.IsNullOrEmpty(column.UpdateDefault) ? "@" + column.Name : column.UpdateDefault.Replace("{TableName}", table.TableName);
        colLen = colValue.Length + 3 + column.Name.Length;
        lineLen += colLen;
        if(lineLen > maxLineLen && colNr > 0) { WriteLine(""); } 
        colNr++;
        
        
        #line default
        #line hidden
        
        #line 374 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("[");

        
        #line default
        #line hidden
        
        #line 375 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(column.Name));

        
        #line default
        #line hidden
        
        #line 375 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("] = ");

        
        #line default
        #line hidden
        
        #line 375 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(colValue));

        
        #line default
        #line hidden
        
        #line 375 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 if(colNr < columns.Count()) {
        
        #line default
        #line hidden
        
        #line 375 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(", ");

        
        #line default
        #line hidden
        
        #line 375 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 } 
        
        #line default
        #line hidden
        
        #line 376 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
    }
    PopIndent();
    WriteLine("");
 
        
        #line default
        #line hidden
        
        #line 379 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("     Where [");

        
        #line default
        #line hidden
        
        #line 380 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(table.SchemaName));

        
        #line default
        #line hidden
        
        #line 380 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("].[");

        
        #line default
        #line hidden
        
        #line 380 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(table.TableName));

        
        #line default
        #line hidden
        
        #line 380 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("].[");

        
        #line default
        #line hidden
        
        #line 380 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(table.PrimaryKeyColumn.Name));

        
        #line default
        #line hidden
        
        #line 380 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("] = ");

        
        #line default
        #line hidden
        
        #line 380 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(pkeyValue));

        
        #line default
        #line hidden
        
        #line 380 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("\r\n");

        
        #line default
        #line hidden
        
        #line 381 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 colNr = 0;
    foreach (var column in colsToCheck)
    {
        colNr++;
        if(colNr==1){ 
        
        #line default
        #line hidden
        
        #line 385 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("      And (");

        
        #line default
        #line hidden
        
        #line 386 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(column.GetAlterCheckLine()));

        
        #line default
        #line hidden
        
        #line 386 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 if(colNr == colsToCheck.Count()) {
        
        #line default
        #line hidden
        
        #line 386 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(")");

        
        #line default
        #line hidden
        
        #line 386 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 } 
        
        #line default
        #line hidden
        
        #line 386 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(" \r\n");

        
        #line default
        #line hidden
        
        #line 387 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
    PushIndent("        ");
        } else {
        
        #line default
        #line hidden
        
        #line 388 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("Or ");

        
        #line default
        #line hidden
        
        #line 389 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(column.GetAlterCheckLine()));

        
        #line default
        #line hidden
        
        #line 389 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 if(colNr == colsToCheck.Count()) {
        
        #line default
        #line hidden
        
        #line 389 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(")");

        
        #line default
        #line hidden
        
        #line 389 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 } 
        
        #line default
        #line hidden
        
        #line 389 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(" \r\n");

        
        #line default
        #line hidden
        
        #line 390 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
         }
        }
    }
    PopIndent();
} 
        
        #line default
        #line hidden
        
        #line 395 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 
protected void WriteInsertStatement(StorageEntitySetting table, string pkeyValue, bool forInsOrUpdate = false, int maxLineLen = 48)
{
    var columns = table.UseInheritance ?
            table.Properties.Where(c => !c.PrimaryKey & !c.Exclude & c.InsertDefault != "null") :
            table.GetColumnList().Where(c => !c.PrimaryKey & !c.Exclude & c.InsertDefault != "null");
 
        
        #line default
        #line hidden
        
        #line 401 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("    Insert Into [");

        
        #line default
        #line hidden
        
        #line 402 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(table.SchemaName));

        
        #line default
        #line hidden
        
        #line 402 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("].[");

        
        #line default
        #line hidden
        
        #line 402 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(table.TableName));

        
        #line default
        #line hidden
        
        #line 402 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("](\r\n");

        
        #line default
        #line hidden
        
        #line 403 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 
    PushIndent("            ");
    if(!string.IsNullOrEmpty(pkeyValue)){ 
        
        #line default
        #line hidden
        
        #line 405 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("[");

        
        #line default
        #line hidden
        
        #line 405 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(table.PrimaryKeyColumn.Name));

        
        #line default
        #line hidden
        
        #line 405 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("], ");

        
        #line default
        #line hidden
        
        #line 405 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 } 
        
        #line default
        #line hidden
        
        #line 406 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
    
    int colNr = 0, colLen, lineLen = 0;
    string colValue;
    foreach (var column in columns)
    {
        colValue = column.GetInsertValue(forInsOrUpdate);
        colLen = colValue.Length > column.Name.Length ? colValue.Length : column.Name.Length;
        lineLen += colLen;
        if(lineLen > maxLineLen && colNr > 0) { WriteLine(""); lineLen = colValue.Length; } 
        colNr++;
        
        
        #line default
        #line hidden
        
        #line 416 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("[");

        
        #line default
        #line hidden
        
        #line 417 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(column.Name));

        
        #line default
        #line hidden
        
        #line 417 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("]");

        
        #line default
        #line hidden
        
        #line 417 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 if(colNr < columns.Count()) {
        
        #line default
        #line hidden
        
        #line 417 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(", ");

        
        #line default
        #line hidden
        
        #line 417 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  } else { 
        
        #line default
        #line hidden
        
        #line 417 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(")");

        
        #line default
        #line hidden
        
        #line 417 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  } 
        
        #line default
        #line hidden
        
        #line 418 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
    }
    PopIndent();
    WriteLine("");
 
        
        #line default
        #line hidden
        
        #line 421 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("    Values (");

        
        #line default
        #line hidden
        
        #line 422 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 if(!string.IsNullOrEmpty(pkeyValue)){ 
        
        #line default
        #line hidden
        
        #line 422 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(pkeyValue));

        
        #line default
        #line hidden
        
        #line 422 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(", ");

        
        #line default
        #line hidden
        
        #line 422 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 } 
        
        #line default
        #line hidden
        
        #line 423 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
    colNr = 0;
    PushIndent("            ");
    lineLen = 0;
    foreach (var column in columns)
    {
        colValue = column.GetInsertValue(forInsOrUpdate);
        colLen = colValue.Length > column.Name.Length ? colValue.Length : column.Name.Length;
        lineLen += colLen;
        if(lineLen > maxLineLen && colNr > 0) { WriteLine(""); lineLen = colValue.Length;} 
        colNr++; 
        
        #line default
        #line hidden
        
        #line 433 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(colValue));

        
        #line default
        #line hidden
        
        #line 433 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 if(colNr < columns.Count()) {
        
        #line default
        #line hidden
        
        #line 433 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(", ");

        
        #line default
        #line hidden
        
        #line 433 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  } else { 
        
        #line default
        #line hidden
        
        #line 433 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(")");

        
        #line default
        #line hidden
        
        #line 433 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  } 
        
        #line default
        #line hidden
        
        #line 434 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 }
    PopIndent();
    WriteLine("");
 
        
        #line default
        #line hidden
        
        #line 438 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 
} 
        
        #line default
        #line hidden
        
        #line 440 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 
protected void WriteSelectStatement(string keyValue)
{
    var firstBase = TableDefinition.GetFirstBase();
 
        
        #line default
        #line hidden
        
        #line 444 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("    Select  [");

        
        #line default
        #line hidden
        
        #line 445 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(firstBase.TableName));

        
        #line default
        #line hidden
        
        #line 445 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("].[");

        
        #line default
        #line hidden
        
        #line 445 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(firstBase.PrimaryKeyColumn.Name));

        
        #line default
        #line hidden
        
        #line 445 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("],\r\n");

        
        #line default
        #line hidden
        
        #line 446 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 WriteSelectColumns(TableDefinition, TableDefinition.UseInheritance); 
        
        #line default
        #line hidden
        
        #line 447 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 if(TableDefinition.UseInheritance)
    {
        //TODO: Handle more than one inherited base
        WriteSelectColumns(firstBase);
    } 
        
        #line default
        #line hidden
        
        #line 452 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 //TODO: Handle more than one inherited base
    if(TableDefinition.UseInheritance)
    { 
        
        #line default
        #line hidden
        
        #line 454 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("    From  [");

        
        #line default
        #line hidden
        
        #line 455 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(firstBase.SchemaName));

        
        #line default
        #line hidden
        
        #line 455 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("].[");

        
        #line default
        #line hidden
        
        #line 455 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(firstBase.TableName));

        
        #line default
        #line hidden
        
        #line 455 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("] Inner Join ");

        
        #line default
        #line hidden
        
        #line 455 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.ConcatTableNameAndSchema()));

        
        #line default
        #line hidden
        
        #line 455 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(" On [");

        
        #line default
        #line hidden
        
        #line 455 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(firstBase.TableName));

        
        #line default
        #line hidden
        
        #line 455 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("].[");

        
        #line default
        #line hidden
        
        #line 455 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(firstBase.PrimaryKeyColumn.Name));

        
        #line default
        #line hidden
        
        #line 455 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("] = [");

        
        #line default
        #line hidden
        
        #line 455 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.TableName));

        
        #line default
        #line hidden
        
        #line 455 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("].[");

        
        #line default
        #line hidden
        
        #line 455 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.PrimaryKeyColumn.Name));

        
        #line default
        #line hidden
        
        #line 455 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("]\r\n");

        
        #line default
        #line hidden
        
        #line 456 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
    } else { 
        
        #line default
        #line hidden
        
        #line 456 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("    From  ");

        
        #line default
        #line hidden
        
        #line 457 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.ConcatTableNameAndSchema()));

        
        #line default
        #line hidden
        
        #line 457 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("\r\n");

        
        #line default
        #line hidden
        
        #line 458 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
    } 
        
        #line default
        #line hidden
        
        #line 458 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("    Where [");

        
        #line default
        #line hidden
        
        #line 459 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(firstBase.SchemaName));

        
        #line default
        #line hidden
        
        #line 459 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("].[");

        
        #line default
        #line hidden
        
        #line 459 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(firstBase.TableName));

        
        #line default
        #line hidden
        
        #line 459 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("].[");

        
        #line default
        #line hidden
        
        #line 459 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(firstBase.PrimaryKeyColumn.Name));

        
        #line default
        #line hidden
        
        #line 459 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("] = ");

        
        #line default
        #line hidden
        
        #line 459 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(keyValue));

        
        #line default
        #line hidden
        
        #line 459 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("\r\n");

        
        #line default
        #line hidden
        
        #line 460 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 
} 
        
        #line default
        #line hidden
        
        #line 462 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"

protected void WriteSelectColumns(StorageEntitySetting table, bool hasMore = false)
{    
    var columns = table.UseInheritance ?
            table.Properties.Where(c => c.PrimaryKey == false & c.Exclude == false) :
            table.GetColumnList().Where(c => c.PrimaryKey == false & c.Exclude == false);
    int colNr = 0;
    foreach (var column in columns)
    {
        colNr++; 
        
        #line default
        #line hidden
        
        #line 471 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("            [");

        
        #line default
        #line hidden
        
        #line 472 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(table.TableName));

        
        #line default
        #line hidden
        
        #line 472 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("].[");

        
        #line default
        #line hidden
        
        #line 472 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(column.Name));

        
        #line default
        #line hidden
        
        #line 472 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("]");

        
        #line default
        #line hidden
        
        #line 472 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 if(colNr < columns.Count() || hasMore) {
        
        #line default
        #line hidden
        
        #line 472 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(",");

        
        #line default
        #line hidden
        
        #line 472 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 } 
        
        #line default
        #line hidden
        
        #line 472 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(" \r\n");

        
        #line default
        #line hidden
        
        #line 473 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
    }

        
        #line default
        #line hidden
        
        #line 475 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 
} 
        
        #line default
        #line hidden
    }
    
    #line default
    #line hidden
}
