// ------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version: 15.0.0.0
//  
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
// ------------------------------------------------------------------------------
namespace OzzCodeGen.CodeEngines.Storage.Templates.MsSql
{
    using System.Linq;
    using System.Text;
    using System.Collections.Generic;
    using System;
    
    /// <summary>
    /// Class to produce the template output
    /// </summary>
    
    #line 1 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
    [global::System.CodeDom.Compiler.GeneratedCodeAttribute("Microsoft.VisualStudio.TextTemplating", "15.0.0.0")]
    public partial class TsqlStoredProcs : AbstractStorageTemplate
    {
#line hidden
        /// <summary>
        /// Create the template output
        /// </summary>
        public override string TransformText()
        {
            this.Write("SET ANSI_NULLS ON\r\nGO\r\nSET QUOTED_IDENTIFIER ON\r\nGO\r\n\r\n");
            
            #line 12 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  var firstBase = TableDefinition.GetFirstBase();
    string pkeyVal = "@" + firstBase.PrimaryKeyColumn.Name;
    var deleteMarkColumn = firstBase.GetDeleteMarkColumn();
    bool createInsertOrUpdate = TableDefinition.StoredProcInsertOrUpdate;

            
            #line default
            #line hidden
            this.Write("-- --------------------------------------------------------------------\r\n-- Store" +
                    "d Procedure: [");
            
            #line 18 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.SchemaName));
            
            #line default
            #line hidden
            this.Write("].[");
            
            #line 18 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.TableName));
            
            #line default
            #line hidden
            this.Write("_Delete]\r\n-- --------------------------------------------------------------------" +
                    "\r\nIF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N\'[");
            
            #line 20 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.SchemaName));
            
            #line default
            #line hidden
            this.Write("].[");
            
            #line 20 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.TableName));
            
            #line default
            #line hidden
            this.Write("_Delete]\') AND type in (N\'P\', N\'PC\'))\r\nDROP PROCEDURE [");
            
            #line 21 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.SchemaName));
            
            #line default
            #line hidden
            this.Write("].[");
            
            #line 21 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.TableName));
            
            #line default
            #line hidden
            this.Write("_Delete]\r\nGO\r\nCREATE PROCEDURE [");
            
            #line 23 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.SchemaName));
            
            #line default
            #line hidden
            this.Write("].[");
            
            #line 23 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.TableName));
            
            #line default
            #line hidden
            this.Write("_Delete]\r\n    ");
            
            #line 24 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pkeyVal));
            
            #line default
            #line hidden
            this.Write(" ");
            
            #line 24 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(GetColumnType(firstBase.PrimaryKeyColumn)));
            
            #line default
            #line hidden
            this.Write("\r\nAs\r\nBegin\r\n");
            
            #line 27 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"

if(deleteMarkColumn != null)
{
 
            
            #line default
            #line hidden
            this.Write("    Declare @");
            
            #line 31 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(deleteMarkColumn.Name));
            
            #line default
            #line hidden
            this.Write(" bit\r\n\r\n    Select @");
            
            #line 33 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(deleteMarkColumn.Name));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 33 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(deleteMarkColumn.Name));
            
            #line default
            #line hidden
            this.Write("\r\n        From [");
            
            #line 34 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.SchemaName));
            
            #line default
            #line hidden
            this.Write("].[");
            
            #line 34 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(firstBase.TableName));
            
            #line default
            #line hidden
            this.Write("]\r\n        Where ");
            
            #line 35 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(firstBase.PrimaryKeyColumn));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 35 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pkeyVal));
            
            #line default
            #line hidden
            this.Write("\r\n\r\n    If @");
            
            #line 37 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(deleteMarkColumn.Name));
            
            #line default
            #line hidden
            this.Write(" = 1\r\n    Begin\r\n        /* TODO: Check cascaded data from other tables */\r\n");
            
            #line 40 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  PushIndent("    ");
    WriteDeleteStatement(TableDefinition, firstBase, pkeyVal);
    PopIndent(); 
            
            #line default
            #line hidden
            this.Write("        \r\n    End\r\n    Else\r\n    Begin\r\n        Update [");
            
            #line 47 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.SchemaName));
            
            #line default
            #line hidden
            this.Write("].[");
            
            #line 47 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(firstBase.TableName));
            
            #line default
            #line hidden
            this.Write("]\r\n            Set ");
            
            #line 48 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(deleteMarkColumn.Name));
            
            #line default
            #line hidden
            this.Write(" = 1\r\n            Where [");
            
            #line 49 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(firstBase.PrimaryKeyColumn));
            
            #line default
            #line hidden
            this.Write("] = ");
            
            #line 49 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pkeyVal));
            
            #line default
            #line hidden
            this.Write("\r\n    End\r\n");
            
            #line 51 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
    } else { 
            
            #line default
            #line hidden
            this.Write("    /* TODO: Check cascaded data from other tables */\r\n");
            
            #line 53 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 WriteDeleteStatement(TableDefinition, firstBase, pkeyVal); 
            
            #line default
            #line hidden
            
            #line 54 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"

} 
            
            #line default
            #line hidden
            this.Write("End\r\nGo\r\n-- --------------------------------------------------------------------\r" +
                    "\n-- Stored Procedure: [");
            
            #line 59 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.SchemaName));
            
            #line default
            #line hidden
            this.Write("].[");
            
            #line 59 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.TableName));
            
            #line default
            #line hidden
            this.Write("_Insert]\r\n-- --------------------------------------------------------------------" +
                    "\r\nIF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N\'[");
            
            #line 61 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.SchemaName));
            
            #line default
            #line hidden
            this.Write("].[");
            
            #line 61 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.TableName));
            
            #line default
            #line hidden
            this.Write("_Insert]\') AND type in (N\'P\', N\'PC\'))\r\nDROP PROCEDURE [");
            
            #line 62 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.SchemaName));
            
            #line default
            #line hidden
            this.Write("].[");
            
            #line 62 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.TableName));
            
            #line default
            #line hidden
            this.Write("_Insert]\r\nGO\r\nCREATE PROCEDURE [");
            
            #line 64 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.SchemaName));
            
            #line default
            #line hidden
            this.Write("].[");
            
            #line 64 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.TableName));
            
            #line default
            #line hidden
            this.Write("_Insert]\r\n");
            
            #line 65 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
        
    var colDeclaresIns = TableDefinition.GetColumnList().Where(c => c.PrimaryKey == false && !c.DataType.StartsWith("as ", StringComparison.InvariantCultureIgnoreCase) && c.Exclude == false & string.IsNullOrEmpty(c.InsertDefault));
    int colNr = 0;
    foreach (var column in colDeclaresIns)
    { 
            colNr++;
            
            #line default
            #line hidden
            this.Write("    @");
            
            #line 71 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(column.Name));
            
            #line default
            #line hidden
            this.Write(" ");
            
            #line 71 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(GetColumnType(column)));
            
            #line default
            #line hidden
            
            #line 71 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 if(colNr < colDeclaresIns.Count()) {
            
            #line default
            #line hidden
            this.Write(",");
            
            #line 71 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  } 
            
            #line default
            #line hidden
            this.Write(" \r\n");
            
            #line 72 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
    } 
            
            #line default
            #line hidden
            this.Write("As\r\nBegin\r\n    Declare @newKey        ");
            
            #line 75 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.PrimaryKeyColumn.DataType));
            
            #line default
            #line hidden
            this.Write("\r\n\r\n");
            
            #line 77 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 WriteInsertStatement(firstBase, string.Empty); 
            
            #line default
            #line hidden
            this.Write("\r\n    Set @newKey = SCOPE_IDENTITY()\r\n");
            
            #line 80 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  if(TableDefinition.UseInheritance)
    { 
            
            #line default
            #line hidden
            this.Write("\r\n");
            
            #line 83 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 WriteInsertStatement(TableDefinition, "@newKey"); 
            
            #line default
            #line hidden
            
            #line 84 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
    } 
            
            #line default
            #line hidden
            this.Write("\r\n");
            
            #line 86 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 WriteSelectStatement("@newKey"); 
            
            #line default
            #line hidden
            this.Write("End\r\nGo\r\n-- --------------------------------------------------------------------\r" +
                    "\n-- Stored Procedure: [");
            
            #line 90 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.SchemaName));
            
            #line default
            #line hidden
            this.Write("].[");
            
            #line 90 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.TableName));
            
            #line default
            #line hidden
            this.Write("_Update]\r\n-- --------------------------------------------------------------------" +
                    "\r\nIF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N\'[");
            
            #line 92 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.SchemaName));
            
            #line default
            #line hidden
            this.Write("].[");
            
            #line 92 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.TableName));
            
            #line default
            #line hidden
            this.Write("_Update]\') AND type in (N\'P\', N\'PC\'))\r\nDROP PROCEDURE [");
            
            #line 93 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.SchemaName));
            
            #line default
            #line hidden
            this.Write("].[");
            
            #line 93 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.TableName));
            
            #line default
            #line hidden
            this.Write("_Update]\r\nGO\r\n");
            
            #line 95 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 
    var colDeclaresUpd = TableDefinition.GetColumnList().Where(c => c.PrimaryKey == false && c.Exclude == false && !c.DataType.StartsWith("as ", StringComparison.InvariantCultureIgnoreCase) & string.IsNullOrEmpty(c.UpdateDefault));

            
            #line default
            #line hidden
            this.Write("CREATE PROCEDURE [");
            
            #line 98 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.SchemaName));
            
            #line default
            #line hidden
            this.Write("].[");
            
            #line 98 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.TableName));
            
            #line default
            #line hidden
            this.Write("_Update]\r\n    ");
            
            #line 99 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pkeyVal));
            
            #line default
            #line hidden
            this.Write(" ");
            
            #line 99 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(GetColumnType(firstBase.PrimaryKeyColumn)));
            
            #line default
            #line hidden
            this.Write(",\r\n");
            
            #line 100 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
        
    colNr = 0;
    foreach (var column in colDeclaresUpd)
    { 
            colNr++;
            
            #line default
            #line hidden
            this.Write("    @");
            
            #line 105 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(column.Name));
            
            #line default
            #line hidden
            this.Write(" ");
            
            #line 105 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(GetColumnType(column)));
            
            #line default
            #line hidden
            
            #line 105 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 if(colNr < colDeclaresUpd.Count()) {
            
            #line default
            #line hidden
            this.Write(",");
            
            #line 105 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  } 
            
            #line default
            #line hidden
            this.Write(" \r\n");
            
            #line 106 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
    } 
            
            #line default
            #line hidden
            this.Write("As\r\nBegin\r\n\r\n");
            
            #line 110 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 WriteUpdateStatement(TableDefinition, pkeyVal); 
            
            #line default
            #line hidden
            
            #line 111 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  if(TableDefinition.UseInheritance)
    { 
            
            #line default
            #line hidden
            this.Write("\r\n");
            
            #line 114 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 WriteUpdateStatement(firstBase, pkeyVal); 
            
            #line default
            #line hidden
            
            #line 115 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
    } 
            
            #line default
            #line hidden
            this.Write("\r\n");
            
            #line 117 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 WriteSelectStatement(pkeyVal); 
            
            #line default
            #line hidden
            this.Write("End\r\nGo\r\n");
            
            #line 120 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 if(createInsertOrUpdate){ 
            
            #line default
            #line hidden
            this.Write("\r\n-- --------------------------------------------------------------------\r\n-- Sto" +
                    "red Procedure: [");
            
            #line 123 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.SchemaName));
            
            #line default
            #line hidden
            this.Write("].[");
            
            #line 123 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.TableName));
            
            #line default
            #line hidden
            this.Write("_InsertOrUpdate]\r\n-- ------------------------------------------------------------" +
                    "--------\r\nIF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N\'[");
            
            #line 125 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.SchemaName));
            
            #line default
            #line hidden
            this.Write("].[");
            
            #line 125 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.TableName));
            
            #line default
            #line hidden
            this.Write("_InsertOrUpdate]\') AND type in (N\'P\', N\'PC\'))\r\nDROP PROCEDURE [");
            
            #line 126 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.SchemaName));
            
            #line default
            #line hidden
            this.Write("].[");
            
            #line 126 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.TableName));
            
            #line default
            #line hidden
            this.Write("_InsertOrUpdate]\r\nGO\r\nCREATE PROCEDURE [");
            
            #line 128 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.SchemaName));
            
            #line default
            #line hidden
            this.Write("].[");
            
            #line 128 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.TableName));
            
            #line default
            #line hidden
            this.Write("_InsertOrUpdate]\r\n    --");
            
            #line 129 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pkeyVal));
            
            #line default
            #line hidden
            this.Write(" ");
            
            #line 129 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(GetColumnType(firstBase.PrimaryKeyColumn)));
            
            #line default
            #line hidden
            this.Write(",\r\n");
            
            #line 130 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
        
    colNr = 0;
    foreach (var column in colDeclaresUpd)
    { 
            colNr++;
            
            #line default
            #line hidden
            this.Write("    @");
            
            #line 135 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(column.Name));
            
            #line default
            #line hidden
            this.Write(" ");
            
            #line 135 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(GetColumnType(column)));
            
            #line default
            #line hidden
            this.Write(",\r\n");
            
            #line 136 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
    } 
            
            #line default
            #line hidden
            this.Write("    @Result int OUTPUT\r\nAs\r\nBegin\r\n    Declare ");
            
            #line 140 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pkeyVal));
            
            #line default
            #line hidden
            this.Write(" ");
            
            #line 140 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(GetColumnType(firstBase.PrimaryKeyColumn)));
            
            #line default
            #line hidden
            this.Write("\r\n\r\n    Set @Result = 0\r\n    Select ");
            
            #line 143 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pkeyVal));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 143 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(firstBase.PrimaryKeyColumn.Name));
            
            #line default
            #line hidden
            this.Write("\r\n        From [");
            
            #line 144 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.SchemaName));
            
            #line default
            #line hidden
            this.Write("].[");
            
            #line 144 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.TableName));
            
            #line default
            #line hidden
            this.Write("]\r\n        Where ");
            
            #line 145 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(firstBase.PrimaryKeyColumn.Name));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 145 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pkeyVal));
            
            #line default
            #line hidden
            this.Write("\r\n\r\n    If @Id Is Null\r\n    Begin\r\n        ");
            
            #line 149 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 WriteInsertStatement(firstBase, string.Empty); 
            
            #line default
            #line hidden
            this.Write("        Set @Result = 1\r\n    End\r\n\r\n    If (Not ");
            
            #line 153 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pkeyVal));
            
            #line default
            #line hidden
            this.Write(" Is Null)\r\n    Begin\r\n");
            
            #line 155 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 WriteUpdateStatement(TableDefinition, pkeyVal); 
            
            #line default
            #line hidden
            
            #line 156 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  if(TableDefinition.UseInheritance)
    { 
            
            #line default
            #line hidden
            this.Write("\r\n");
            
            #line 159 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 WriteUpdateStatement(firstBase, pkeyVal); 
            
            #line default
            #line hidden
            
            #line 160 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
    } 
            
            #line default
            #line hidden
            this.Write("        Set @Result = -1\r\n    End\r\n    Select @Result\r\nEnd\r\nGo\r\n/*\r\nTo map in EF\r" +
                    "\n\r\n        public int InsertOrUpdate(");
            
            #line 169 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.EntityDefinition.Name));
            
            #line default
            #line hidden
            this.Write(" entity)\r\n        {\r\n            var result = ");
            
            #line 171 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.TableName));
            
            #line default
            #line hidden
            this.Write("_InsertOrUpdate(\r\n                //entity.");
            
            #line 172 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(firstBase.PrimaryKeyColumn));
            
            #line default
            #line hidden
            this.Write(",\r\n");
            
            #line 173 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
        
    colNr = 0;
    foreach (var column in colDeclaresUpd)
    { 
            colNr++;
            
            #line default
            #line hidden
            this.Write("                entity.");
            
            #line 178 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(column.Name));
            
            #line default
            #line hidden
            this.Write(",\r\n");
            
            #line 179 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
    } 
            
            #line default
            #line hidden
            this.Write("                new ObjectParameter(\"Result\", typeof(int)));\r\n\r\n            retur" +
                    "n result.FirstOrDefault() ?? 0;\r\n        }\r\n\r\n*/\r\n");
            
            #line 186 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
    } 
            
            #line default
            #line hidden
            return this.GenerationEnvironment.ToString();
        }
        
        #line 187 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 
protected void WriteDeleteStatement(StorageEntitySetting table, StorageEntitySetting baseTable,string pkeyValue)
{ 
        
        #line default
        #line hidden
        
        #line 189 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("    Delete From [");

        
        #line default
        #line hidden
        
        #line 190 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(table.SchemaName));

        
        #line default
        #line hidden
        
        #line 190 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("].[");

        
        #line default
        #line hidden
        
        #line 190 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(table.TableName));

        
        #line default
        #line hidden
        
        #line 190 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("]\r\n        Where [");

        
        #line default
        #line hidden
        
        #line 191 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(table.SchemaName));

        
        #line default
        #line hidden
        
        #line 191 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("].[");

        
        #line default
        #line hidden
        
        #line 191 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(table.TableName));

        
        #line default
        #line hidden
        
        #line 191 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("].[");

        
        #line default
        #line hidden
        
        #line 191 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(table.PrimaryKeyColumn.Name));

        
        #line default
        #line hidden
        
        #line 191 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("] = ");

        
        #line default
        #line hidden
        
        #line 191 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(pkeyValue));

        
        #line default
        #line hidden
        
        #line 191 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("\r\n");

        
        #line default
        #line hidden
        
        #line 192 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 if(TableDefinition.UseInheritance)
    { 
        
        #line default
        #line hidden
        
        #line 193 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("\r\n    Delete From [");

        
        #line default
        #line hidden
        
        #line 195 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(baseTable.SchemaName));

        
        #line default
        #line hidden
        
        #line 195 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("].[");

        
        #line default
        #line hidden
        
        #line 195 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(baseTable.TableName));

        
        #line default
        #line hidden
        
        #line 195 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("]\r\n        Where [");

        
        #line default
        #line hidden
        
        #line 196 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(baseTable.SchemaName));

        
        #line default
        #line hidden
        
        #line 196 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("].[");

        
        #line default
        #line hidden
        
        #line 196 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(baseTable.TableName));

        
        #line default
        #line hidden
        
        #line 196 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("].[");

        
        #line default
        #line hidden
        
        #line 196 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(baseTable.PrimaryKeyColumn.Name));

        
        #line default
        #line hidden
        
        #line 196 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("] = ");

        
        #line default
        #line hidden
        
        #line 196 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(pkeyValue));

        
        #line default
        #line hidden
        
        #line 196 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("\r\n");

        
        #line default
        #line hidden
        
        #line 197 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
    } 
        
        #line default
        #line hidden
        
        #line 198 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 
} 
        
        #line default
        #line hidden
        
        #line 200 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 
protected void WriteUpdateStatement(StorageEntitySetting table, string pkeyValue, int maxLineLen = 48)
{
    var columns = table.UseInheritance ?
            table.Properties.Where(c => c.PrimaryKey == false & c.Exclude == false & c.UpdateDefault != "NeverUpdate") :
            table.GetColumnList().Where(c => c.PrimaryKey == false & c.Exclude == false & c.UpdateDefault != "NeverUpdate");
    if(columns.Any())
    {
 
        
        #line default
        #line hidden
        
        #line 208 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("    Update [");

        
        #line default
        #line hidden
        
        #line 209 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(table.SchemaName));

        
        #line default
        #line hidden
        
        #line 209 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("].[");

        
        #line default
        #line hidden
        
        #line 209 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(table.TableName));

        
        #line default
        #line hidden
        
        #line 209 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("]\r\n       Set ");

        
        #line default
        #line hidden
        
        #line 210 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
    
    int colNr = 0, colLen, lineLen = 0;
    PushIndent("           ");
    foreach (var column in columns)
    { 
        string colValue = string.IsNullOrEmpty(column.UpdateDefault) ? "@" + column.Name : column.UpdateDefault.Replace("{TableName}", table.TableName);
        colLen = colValue.Length + 3 + column.Name.Length;
        lineLen += colLen;
        if(lineLen > maxLineLen && colNr > 0) { WriteLine(""); } 
        colNr++;
        
        
        #line default
        #line hidden
        
        #line 220 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("[");

        
        #line default
        #line hidden
        
        #line 221 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(column.Name));

        
        #line default
        #line hidden
        
        #line 221 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("] = ");

        
        #line default
        #line hidden
        
        #line 221 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(colValue));

        
        #line default
        #line hidden
        
        #line 221 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 if(colNr < columns.Count()) {
        
        #line default
        #line hidden
        
        #line 221 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(", ");

        
        #line default
        #line hidden
        
        #line 221 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 } 
        
        #line default
        #line hidden
        
        #line 222 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
    }
    PopIndent();
    WriteLine("");
 
        
        #line default
        #line hidden
        
        #line 225 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("     Where [");

        
        #line default
        #line hidden
        
        #line 226 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(table.SchemaName));

        
        #line default
        #line hidden
        
        #line 226 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("].[");

        
        #line default
        #line hidden
        
        #line 226 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(table.TableName));

        
        #line default
        #line hidden
        
        #line 226 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("].[");

        
        #line default
        #line hidden
        
        #line 226 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(table.PrimaryKeyColumn.Name));

        
        #line default
        #line hidden
        
        #line 226 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("] = ");

        
        #line default
        #line hidden
        
        #line 226 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(pkeyValue));

        
        #line default
        #line hidden
        
        #line 226 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("\r\n");

        
        #line default
        #line hidden
        
        #line 227 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 }
} 
        
        #line default
        #line hidden
        
        #line 229 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 
protected void WriteInsertStatement(StorageEntitySetting table, string pkeyValue, int maxLineLen = 48)
{
    var columns = table.UseInheritance ?
            table.Properties.Where(c => !c.PrimaryKey & !c.Exclude & c.InsertDefault != "null") :
            table.GetColumnList().Where(c => !c.PrimaryKey & !c.Exclude & c.InsertDefault != "null");
 
        
        #line default
        #line hidden
        
        #line 235 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("    Insert Into [");

        
        #line default
        #line hidden
        
        #line 236 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(table.SchemaName));

        
        #line default
        #line hidden
        
        #line 236 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("].[");

        
        #line default
        #line hidden
        
        #line 236 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(table.TableName));

        
        #line default
        #line hidden
        
        #line 236 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("](\r\n");

        
        #line default
        #line hidden
        
        #line 237 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 
    PushIndent("            ");
    if(!string.IsNullOrEmpty(pkeyValue)){ 
        
        #line default
        #line hidden
        
        #line 239 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("[");

        
        #line default
        #line hidden
        
        #line 239 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(table.PrimaryKeyColumn.Name));

        
        #line default
        #line hidden
        
        #line 239 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("], ");

        
        #line default
        #line hidden
        
        #line 239 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 } 
        
        #line default
        #line hidden
        
        #line 240 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
    
    int colNr = 0, colLen, lineLen = 0;
    string colValue;
    foreach (var column in columns)
    {
        colValue = string.IsNullOrEmpty(column.InsertDefault) ? "@" + column.Name : column.InsertDefault;
        colLen = colValue.Length > column.Name.Length ? colValue.Length : column.Name.Length;
        lineLen += colLen;
        if(lineLen > maxLineLen && colNr > 0) { WriteLine(""); lineLen = colValue.Length; } 
        colNr++;
        
        
        #line default
        #line hidden
        
        #line 250 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("[");

        
        #line default
        #line hidden
        
        #line 251 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(column.Name));

        
        #line default
        #line hidden
        
        #line 251 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("]");

        
        #line default
        #line hidden
        
        #line 251 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 if(colNr < columns.Count()) {
        
        #line default
        #line hidden
        
        #line 251 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(", ");

        
        #line default
        #line hidden
        
        #line 251 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  } else { 
        
        #line default
        #line hidden
        
        #line 251 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(")");

        
        #line default
        #line hidden
        
        #line 251 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  } 
        
        #line default
        #line hidden
        
        #line 252 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
    }
    PopIndent();
    WriteLine("");
 
        
        #line default
        #line hidden
        
        #line 255 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("    Values (");

        
        #line default
        #line hidden
        
        #line 256 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 if(!string.IsNullOrEmpty(pkeyValue)){ 
        
        #line default
        #line hidden
        
        #line 256 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(pkeyValue));

        
        #line default
        #line hidden
        
        #line 256 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(", ");

        
        #line default
        #line hidden
        
        #line 256 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 } 
        
        #line default
        #line hidden
        
        #line 257 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
    colNr = 0;
    PushIndent("            ");
    lineLen = 0;
    foreach (var column in columns)
    {
        colValue = string.IsNullOrEmpty(column.InsertDefault) ? "@" + column.Name : column.InsertDefault;
        colLen = colValue.Length > column.Name.Length ? colValue.Length : column.Name.Length;
        lineLen += colLen;
        if(lineLen > maxLineLen && colNr > 0) { WriteLine(""); lineLen = colValue.Length;} 
        colNr++; 
        
        #line default
        #line hidden
        
        #line 267 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(colValue));

        
        #line default
        #line hidden
        
        #line 267 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 if(colNr < columns.Count()) {
        
        #line default
        #line hidden
        
        #line 267 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(", ");

        
        #line default
        #line hidden
        
        #line 267 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  } else { 
        
        #line default
        #line hidden
        
        #line 267 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(")");

        
        #line default
        #line hidden
        
        #line 267 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
  } 
        
        #line default
        #line hidden
        
        #line 268 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 }
    PopIndent();
    WriteLine("");
 
        
        #line default
        #line hidden
        
        #line 272 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 
} 
        
        #line default
        #line hidden
        
        #line 274 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 
protected void WriteSelectStatement(string keyValue)
{
    var firstBase = TableDefinition.GetFirstBase();
 
        
        #line default
        #line hidden
        
        #line 278 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("    Select  [");

        
        #line default
        #line hidden
        
        #line 279 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(firstBase.TableName));

        
        #line default
        #line hidden
        
        #line 279 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("].[");

        
        #line default
        #line hidden
        
        #line 279 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(firstBase.PrimaryKeyColumn.Name));

        
        #line default
        #line hidden
        
        #line 279 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("],\r\n");

        
        #line default
        #line hidden
        
        #line 280 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 WriteSelectColumns(TableDefinition, TableDefinition.UseInheritance); 
        
        #line default
        #line hidden
        
        #line 281 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 if(TableDefinition.UseInheritance)
    {
        //TODO: Handle more than one inherited base
        WriteSelectColumns(firstBase); 
    } 
        
        #line default
        #line hidden
        
        #line 286 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 //TODO: Handle more than one inherited base
    if(TableDefinition.UseInheritance)
    { 
        
        #line default
        #line hidden
        
        #line 288 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("    From  [");

        
        #line default
        #line hidden
        
        #line 289 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(firstBase.SchemaName));

        
        #line default
        #line hidden
        
        #line 289 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("].[");

        
        #line default
        #line hidden
        
        #line 289 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(firstBase.TableName));

        
        #line default
        #line hidden
        
        #line 289 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("] Inner Join [");

        
        #line default
        #line hidden
        
        #line 289 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.SchemaName));

        
        #line default
        #line hidden
        
        #line 289 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("].[");

        
        #line default
        #line hidden
        
        #line 289 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.TableName));

        
        #line default
        #line hidden
        
        #line 289 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("] On [");

        
        #line default
        #line hidden
        
        #line 289 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(firstBase.TableName));

        
        #line default
        #line hidden
        
        #line 289 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("].[");

        
        #line default
        #line hidden
        
        #line 289 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(firstBase.PrimaryKeyColumn.Name));

        
        #line default
        #line hidden
        
        #line 289 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("] = [");

        
        #line default
        #line hidden
        
        #line 289 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.TableName));

        
        #line default
        #line hidden
        
        #line 289 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("].[");

        
        #line default
        #line hidden
        
        #line 289 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.PrimaryKeyColumn.Name));

        
        #line default
        #line hidden
        
        #line 289 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("]\r\n");

        
        #line default
        #line hidden
        
        #line 290 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
    } else { 
        
        #line default
        #line hidden
        
        #line 290 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("    From  [");

        
        #line default
        #line hidden
        
        #line 291 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.SchemaName));

        
        #line default
        #line hidden
        
        #line 291 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("].[");

        
        #line default
        #line hidden
        
        #line 291 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(TableDefinition.TableName));

        
        #line default
        #line hidden
        
        #line 291 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("]\r\n");

        
        #line default
        #line hidden
        
        #line 292 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
    } 
        
        #line default
        #line hidden
        
        #line 292 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("    Where [");

        
        #line default
        #line hidden
        
        #line 293 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(firstBase.SchemaName));

        
        #line default
        #line hidden
        
        #line 293 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("].[");

        
        #line default
        #line hidden
        
        #line 293 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(firstBase.TableName));

        
        #line default
        #line hidden
        
        #line 293 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("].[");

        
        #line default
        #line hidden
        
        #line 293 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(firstBase.PrimaryKeyColumn.Name));

        
        #line default
        #line hidden
        
        #line 293 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("] = ");

        
        #line default
        #line hidden
        
        #line 293 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(keyValue));

        
        #line default
        #line hidden
        
        #line 293 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("\r\n");

        
        #line default
        #line hidden
        
        #line 294 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 
} 
        
        #line default
        #line hidden
        
        #line 296 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"

protected void WriteSelectColumns(StorageEntitySetting table, bool hasMore = false)
{    
    var columns = table.UseInheritance ?
            table.Properties.Where(c => c.PrimaryKey == false & c.Exclude == false) :
            table.GetColumnList().Where(c => c.PrimaryKey == false & c.Exclude == false);
    int colNr = 0;
    foreach (var column in columns)
    {
        colNr++; 
        
        #line default
        #line hidden
        
        #line 305 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("            [");

        
        #line default
        #line hidden
        
        #line 306 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(table.TableName));

        
        #line default
        #line hidden
        
        #line 306 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("].[");

        
        #line default
        #line hidden
        
        #line 306 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(column.Name));

        
        #line default
        #line hidden
        
        #line 306 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write("]");

        
        #line default
        #line hidden
        
        #line 306 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 if(colNr < columns.Count() | hasMore) {
        
        #line default
        #line hidden
        
        #line 306 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(",");

        
        #line default
        #line hidden
        
        #line 306 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 } 
        
        #line default
        #line hidden
        
        #line 306 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
this.Write(" \r\n");

        
        #line default
        #line hidden
        
        #line 307 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
    }

        
        #line default
        #line hidden
        
        #line 309 "C:\Users\ozalp\source\repos\OzzCodeGen\OzzCodeGen\CodeEngines\Storage\Templates\MsSql\TsqlStoredProcs.tt"
 
} 
        
        #line default
        #line hidden
    }
    
    #line default
    #line hidden
}
